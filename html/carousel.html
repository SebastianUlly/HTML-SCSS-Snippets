<!DOCTYPE html>
<html lang="en">
<head>
	<meta charset="UTF-8">
	<meta http-equiv="X-UA-Compatible" content="IE=edge">
	<meta name="viewport" content="width=device-width, initial-scale=1.0">

	<link rel="stylesheet" href="../css/set.css">
	<link rel="stylesheet" href="../css/carousel.css">
	<title>Karousel</title>

	<script>
		document.addEventListener('DOMContentLoaded', function () {
			const percentage_to_slide = 100/6
			const carousel = document.querySelector('.carousel')
			const slider = document.querySelector('.slider');
			const controls = document.querySelector('.carousel__controls');
			const prev = controls.querySelector('.arrow__prev');
			const next = controls.querySelector('.arrow__next');

			let direction = -1;
			prev.addEventListener('click', function() {
				slider.style.transform = `translateX(${percentage_to_slide}%)`;
				if (direction === -1) {
					slider.appendChild(slider.firstElementChild);
					direction = 1;
				}
				// carousel.style.justifyContent = 'flex-end';
			});

			next.addEventListener('click', function() {
				if (direction === 1) {
					slider.prepend(slider.lastElementChild);
					direction = -1
				}
				// carousel.style.justifyContent = 'flex-start';
				slider.style.transform = `translateX(-${percentage_to_slide}%)`;
			});

			slider.addEventListener('transitionend', function () {
				if (direction === -1) {
					slider.appendChild(slider.firstElementChild);
				} else if (direction === 1) {
					slider.prepend(slider.lastElementChild)
				}

				slider.style.transition = 'none';
				slider.style.transform = 'translateX(0)';
				setTimeout(function () {
					slider.style.transition = 'all 0.5s'
				})
			});
		});
	</script>
</head>

<body>
	<div class="parent">
		<div class="carousel">
			<div class="slider">
				<section style="background-color: wheat">Content for section 1</section>
				<section style="background-color: aquamarine;">Content for section 2</section>
				<section style="background-color: pink;">Content for section 3</section>
				<section style="background-color: aqua;">Content for section 4</section>
				<section style="background-color: yellow;">Content for section 5</section>
				<section style="background-color: red;">Content for section 6</section>
			</div>
			<div class="carousel__controls">
				<span class="arrow arrow__prev">prev</span>
				<span class="arrow arrow__next">next</span>
			</div>
		</div>
	</div>
</body>
</html>